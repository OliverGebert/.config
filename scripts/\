#!/bin/bash
# fps.sh - Interaktive Prozessauswahl per fzf, PID in Zwischenablage kopieren
# Optional: Alias in .zshrc setzen, z.B. alias fps="~/scripts/fps.sh"

# ----------------------------
# 1. Pr체fen, ob fzf installiert ist
# ----------------------------
if ! command -v fzf >/dev/null 2>&1; then
    echo "Fehler: fzf ist nicht installiert. Bitte installiere fzf."
    exit 1
fi

# ----------------------------
# 2. Prozesse auflisten und mit fzf interaktiv ausw채hlen
# ----------------------------
PROCESS_LINE=$(ps -ef | fzf --prompt="Prozess ausw채hlen: ")
if [[ -z "$PROCESS_LINE" ]]; then
    echo "Kein Prozess ausgew채hlt."
    exit 1
fi

# ----------------------------
# 3. PID extrahieren (2. Spalte von ps -ef)
# ----------------------------
PID=$(echo "$PROCESS_LINE" | awk '{print $2}')
if [[ -z "$PID" ]]; then
    echo "Fehler: PID konnte nicht extrahiert werden."
    exit 1
fi

# ----------------------------
# 4. PID in Zwischenablage kopieren
# ----------------------------
# macOS: pbcopy, Linux: xclip oder wl-copy
if command -v pbcopy >/dev/null 2>&1; then
    echo -n "$PID" | pbcopy
    echo "PID $PID kopiert in Zwischenablage (macOS)"
else
    echo "Warnung: Keine Zwischenablage-Utility gefunden. PID: $PID"
fi

exit 0

